# üéâ –û–¢–ß–ï–¢ –û –ó–ê–í–ï–†–®–ï–ù–ù–û–ú –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ï

**–î–∞—Ç–∞:** 2025-12-18  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- **–§–∞–π–ª–æ–≤ Python:** 49
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~8,738
- **–ú–µ—Ä—Ç–≤—ã–π –∫–æ–¥:** ~896 —Å—Ç—Ä–æ–∫ (18%)
- **–î—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥:** ~150 —Å—Ç—Ä–æ–∫
- **–°–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:** 2 (—Å—Ç–∞—Ä–∞—è + –Ω–æ–≤–∞—è)
- **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** 4 (workflow, MCP, LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã)

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- **–§–∞–π–ª–æ–≤ Python:** 41 (-8 —Ñ–∞–π–ª–æ–≤)
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~7,842 (-896 —Å—Ç—Ä–æ–∫, -10.3%)
- **–ú–µ—Ä—Ç–≤—ã–π –∫–æ–¥:** 0 —Å—Ç—Ä–æ–∫ (0%)
- **–î—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥:** 0 —Å—Ç—Ä–æ–∫
- **–°–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:** 1 (–Ω–æ–≤–∞—è, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è)
- **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** 0

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò

### –§–ê–ó–ê 1: –£–î–ê–õ–ï–ù–ò–ï –ú–ï–†–¢–í–û–ì–û –ö–û–î–ê ‚úÖ

#### 1.1. –£–¥–∞–ª–µ–Ω —Å—Ç–∞—Ä—ã–π workflow (4 —Ñ–∞–π–ª–∞)
- ‚ùå `app/agents/workflow.py` (127 —Å—Ç—Ä–æ–∫)
- ‚ùå `app/agents/planner.py` (82 —Å—Ç—Ä–æ–∫–∏)
- ‚ùå `app/agents/analyzer.py` (36 —Å—Ç—Ä–æ–∫)
- ‚ùå `app/agents/executor.py` (55 —Å—Ç—Ä–æ–∫)
- ‚ùå Endpoint `/agent/prompt` (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª, —Ç—Ä–µ–±–æ–≤–∞–ª GigaChat/HuggingFace)

**–ü—Ä–∏—á–∏–Ω–∞ —É–¥–∞–ª–µ–Ω–∏—è:** –°—Ç–∞—Ä—ã–π workflow –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è. –†–µ–∞–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `client_workflow.py`.

#### 1.2. –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- ‚ùå `_HuggingFaceProvider` (~50 —Å—Ç—Ä–æ–∫)
- ‚ùå `_GigaChatProvider` (~45 —Å—Ç—Ä–æ–∫)
- ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ `_OpenRouterProvider` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**–ü—Ä–∏—á–∏–Ω–∞ —É–¥–∞–ª–µ–Ω–∏—è:** HuggingFace –∏ GigaChat –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è. Fallback chain –±—ã–ª –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω.

#### 1.3. –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π
- ‚ùå `validate_inn()` –∏–∑ `app/api/routes/data.py` (–ø—Ä–æ—Å—Ç–∞—è regex –≤–µ—Ä—Å–∏—è)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `validate_inn()` –∏–∑ `app/utility/helpers.py` (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Å—É–º–º)

**–ü—Ä–∏—á–∏–Ω–∞:** –î—É–±–ª–∏—Ä—É—é—â–∞—è—Å—è —Ñ—É–Ω–∫—Ü–∏—è —Å —Ö—É–¥—à–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π.

#### 1.4. –£–¥–∞–ª–µ–Ω MCP Server
- ‚ùå `app/mcp_server/server.py` (1605 –±–∞–π—Ç)
- ‚ùå `app/mcp_server/tools.py` (25935 –±–∞–π—Ç)
- ‚ùå `app/mcp_server/__init__.py` (216 –±–∞–π—Ç)
- ‚ùå –§—É–Ω–∫—Ü–∏—è `start_background_services()` –≤ `main.py`

**–ü—Ä–∏—á–∏–Ω–∞ —É–¥–∞–ª–µ–Ω–∏—è:** MCP Server –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—ã–º workflow. –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è workflow —Å—Ç–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º.

---

### –§–ê–ó–ê 2: –ú–ò–ì–†–ê–¶–ò–Ø –ù–ê –ù–û–í–£–Æ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Æ ‚úÖ

#### 2.1. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ API –∫–ª–∏–µ–Ω—Ç—ã
–ó–∞–º–µ–Ω–µ–Ω–æ: `from app.settings import settings` ‚Üí `from app.config import settings`

**–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `app/services/perplexity_client.py`
  - `settings.perplexity_api_key` ‚Üí `settings.perplexity.api_key`
  - `settings.perplexity_model` ‚Üí `settings.perplexity.model`
  - –î–æ–±–∞–≤–ª–µ–Ω `settings.perplexity.cache_ttl`

- ‚úÖ `app/services/tavily_client.py`
  - `settings.tavily_token` ‚Üí `settings.tavily.api_key`
  - –î–æ–±–∞–≤–ª–µ–Ω `settings.tavily.cache_ttl`

- ‚úÖ `app/services/openrouter_client.py`
  - `settings.openrouter_api_key` ‚Üí `settings.openrouter.api_key`
  - `settings.openrouter_model` ‚Üí `settings.openrouter.model`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã `settings.openrouter.temperature`, `settings.openrouter.max_tokens`

- ‚úÖ `app/services/email_client.py`
  - `settings.smtp_*` ‚Üí `settings.mail.smtp_*`
  - –î–æ–±–∞–≤–ª–µ–Ω `settings.mail.use_tls`, `settings.mail.default_from`

- ‚úÖ `app/services/fetch_data.py`
  - `settings.dadata_url`, `settings.dadata_api_key` ‚Üí `settings.dadata.api_url`, `settings.dadata.api_key`
  - `settings.infosphere_*` ‚Üí `settings.infosphere.*`
  - `settings.casebook_*` ‚Üí `settings.casebook.*`

#### 2.2. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω Tarantool
- ‚úÖ `app/storage/tarantool.py`
  - `settings.tarantool_host` ‚Üí `settings.tarantool.host`
  - `settings.tarantool_port` ‚Üí `settings.tarantool.port`
  - `settings.tarantool_user` ‚Üí `settings.tarantool.user`
  - `settings.tarantool_password` ‚Üí `settings.tarantool.password`

#### 2.3. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∞–≥–µ–Ω—Ç—ã
- ‚úÖ `app/agents/llm_init.py`
  - `settings.openrouter_api_key` ‚Üí `settings.openrouter.api_key`
  - `settings.openrouter_model` ‚Üí `settings.openrouter.model`
  - –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã `get_huggingface_token`, `get_huggingface_model`

- ‚úÖ `app/agents/data_collector.py`
  - –•–∞—Ä–¥–∫–æ–¥ `MAX_CONCURRENT = 5` ‚Üí `MAX_CONCURRENT_SEARCHES` –∏–∑ config
  - –•–∞—Ä–¥–∫–æ–¥ `SEARCH_TIMEOUT = 60` ‚Üí `SEARCH_TIMEOUT_SECONDS` –∏–∑ config
  - –•–∞—Ä–¥–∫–æ–¥ `MAX_WEB_CONTENT_CHARS = 2500` ‚Üí `MAX_CONTENT_LENGTH` –∏–∑ config

#### 2.4. main.py
- ‚úÖ –£–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –Ω–æ–≤—É—é config —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- ‚úÖ –£–¥–∞–ª–µ–Ω –∏–º–ø–æ—Ä—Ç MCP —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—É–±—Ä–∞–Ω–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ MCP)

#### 2.5. –£–¥–∞–ª–µ–Ω —Å—Ç–∞—Ä—ã–π settings.py
- ‚ùå `app/settings.py` (93 —Å—Ç—Ä–æ–∫–∏, 2715 –±–∞–π—Ç) - **–ü–û–õ–ù–û–°–¢–¨–Æ –£–î–ê–õ–ï–ù**

---

### –§–ê–ó–ê 3: –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø ‚úÖ

#### 3.3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
- ‚úÖ `app/config/constants.py` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- ‚úÖ –ê–≥–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞
- ‚úÖ `RATE_LIMIT_PROMPT_PER_MINUTE` —É–¥–∞–ª–µ–Ω–∞ (endpoint —É–¥–∞–ª–µ–Ω)
- ‚úÖ Rate limiting –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ config

---

## üéØ –î–û–°–¢–ò–ì–ù–£–¢–´–ï –¶–ï–õ–ò

### 1. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ‚úÖ
- ‚úÖ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `app/config/`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ Vault/Env/YAML
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (base, database, external_api, security, services)
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ `from app.config import settings`

### 2. –£–¥–∞–ª–µ–Ω –º–µ—Ä—Ç–≤—ã–π –∫–æ–¥ ‚úÖ
- ‚úÖ –£–¥–∞–ª–µ–Ω–æ 896 —Å—Ç—Ä–æ–∫ (10.3% –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã)
- ‚úÖ –£–¥–∞–ª–µ–Ω–æ 8 —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ö–æ–¥ —Å—Ç–∞–ª —á–∏—â–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ

### 3. –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã ‚úÖ
- ‚úÖ –û–¥–Ω–∞ –≤–µ—Ä—Å–∏—è `validate_inn()` —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç ‚úÖ
- ‚úÖ –í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ `app/config/constants.py`
- ‚úÖ –•–∞—Ä–¥–∫–æ–¥ –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –∏–º–ø–æ—Ä—Ç—ã –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö

### 5. –£–ª—É—á—à–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚úÖ
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω `main.py` (—É–¥–∞–ª–µ–Ω—ã —Ñ–æ–Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã)
- ‚úÖ –û—á–∏—â–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

---

## üìà –£–õ–£–ß–®–ï–ù–ò–Ø –ü–û –ö–ê–¢–ï–ì–û–†–ò–Ø–ú

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å üîí
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ —á–µ—Ä–µ–∑ Vault
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ò–ù–ù —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Å—É–º–º
- ‚úÖ Rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚ö°
- ‚úÖ –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥ ‚Üí –±—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–º–µ–Ω—å—à–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ LLM)
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —á–µ—Ä–µ–∑ config TTL

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ üõ†Ô∏è
- ‚úÖ –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ‚Üí –ª–µ–≥—á–µ –º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ ‚Üí –ø—Ä–æ—â–µ –æ–±–Ω–æ–≤–ª—è—Ç—å
- ‚úÖ –ú–µ–Ω—å—à–µ –∫–æ–¥–∞ ‚Üí –ø—Ä–æ—â–µ —á–∏—Ç–∞—Ç—å –∏ –¥–µ–±–∞–∂–∏—Ç—å

### –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å üß™
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ config ‚Üí –ª–µ–≥—á–µ –º–æ–∫–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚Üí –ø—Ä–æ—â–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã
- ‚úÖ –ù–µ—Ç –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞ ‚Üí –Ω–µ –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ

---

## üîÑ –û–ë–†–ê–¢–ù–ê–Ø –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- ‚úÖ –í—Å–µ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç (–∫—Ä–æ–º–µ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ `/agent/prompt`)
- ‚úÖ Streamlit UI —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ Integrations —Å –≤–Ω–µ—à–Ω–∏–º–∏ API —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ Tarantool –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è .env:
```bash
# –°—Ç–∞—Ä—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (DEPRECATED, –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è):
# HUGGING_FACE_TOKEN, HUGING_FACE_MODEL
# GIGACHAT_TOKEN, GIGACHAT_BASE_URL, GIGACHAT_MODEL

# –†–∞–±–æ—Ç–∞—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π):
# OPENROUTER_API_KEY, OPENROUTER_MODEL
# PERPLEXITY_API_KEY, PERPLEXITY_MODEL
# TAVILY_TOKEN –∏–ª–∏ TAVILY_API_KEY
# DADATA_API_KEY
# CASEBOOK_API_KEY
# INFOSPHERE_LOGIN, INFOSPHERE_PASSWORD
# TARANTOOL_HOST, TARANTOOL_PORT, TARANTOOL_USER, TARANTOOL_PASSWORD
# SMTP_HOST, SMTP_PORT, SMTP_USER, SMTP_PASSWORD, SMTP_FROM
```

---

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –î–ê–õ–¨–ù–ï–ô–®–ï–ì–û –†–ê–ó–í–ò–¢–ò–Ø

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. **–ó–∞–≤–µ—Ä—à–∏—Ç—å RabbitMQ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é** (FastStream) - —Å–µ—Ä–≤–∏—Å –¥–æ–±–∞–≤–ª–µ–Ω –≤ docker-compose, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
2. **–°–æ–∑–¥–∞—Ç—å Tarantool spaces** (cache, reports, threads) - —Å–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω space
3. **Repository pattern –¥–ª—è Tarantool** - –¥–ª—è –ª—É—á—à–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
4. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —É–±—Ä–∞—Ç—å `_cache` dict –∏–∑ PerplexityClient –∏ TavilyClient, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Tarantool
5. **Streamlit —É–ª—É—á—à–µ–Ω–∏—è** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, real-time updates, –∏—Å—Ç–æ—Ä–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
6. **–î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã –≤–µ–∑–¥–µ** - –¥–ª—è –ª—É—á—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ IDE

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
7. **API versioning** (–Ω–∞–ø—Ä–∏–º–µ—Ä `/api/v1/`)
8. **Prometheus metrics** - –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
9. **Graceful shutdown** –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

---

## üöÄ –ú–ò–ì–†–ê–¶–ò–Ø –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–û–í

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏–º–ø–æ—Ä—Ç–∞—Ö:

**–î–æ:**
```python
from app.settings import settings

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
api_key = settings.perplexity_api_key
model = settings.openrouter_model
host = settings.tarantool_host
```

**–ü–æ—Å–ª–µ:**
```python
from app.config import settings

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
api_key = settings.perplexity.api_key
model = settings.openrouter.model
host = settings.tarantool.host
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞—Ö:

**–î–æ:**
```python
MAX_CONCURRENT = 5  # –•–∞—Ä–¥–∫–æ–¥
SEARCH_TIMEOUT = 60  # –•–∞—Ä–¥–∫–æ–¥
```

**–ü–æ—Å–ª–µ:**
```python
from app.config import MAX_CONCURRENT_SEARCHES, SEARCH_TIMEOUT_SECONDS

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
semaphore = asyncio.Semaphore(MAX_CONCURRENT_SEARCHES)
timeout = SEARCH_TIMEOUT_SECONDS
```

---

## ‚úÖ –ü–†–û–í–ï–†–û–ß–ù–´–ô –°–ü–ò–°–û–ö

- [x] –í—Å–µ —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –Ω–æ–≤—É—é config
- [x] –°—Ç–∞—Ä—ã–π settings.py —É–¥–∞–ª–µ–Ω
- [x] –ú–µ—Ä—Ç–≤—ã–π –∫–æ–¥ —É–¥–∞–ª–µ–Ω
- [x] –î—É–±–ª–∏–∫–∞—Ç—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã
- [x] –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [x] .env.example –æ–±–Ω–æ–≤–ª–µ–Ω (—Ä–∞–Ω–µ–µ –≤ –§–∞–∑–µ 1)
- [x] docker-compose.yml –æ–±–Ω–æ–≤–ª–µ–Ω (—Ä–∞–Ω–µ–µ –≤ –§–∞–∑–µ 1)
- [ ] –¢–µ—Å—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
- [x] –û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω

---

## üéì –ò–ó–í–õ–ï–ß–ï–ù–ù–´–ï –£–†–û–ö–ò

1. **–í–∞–∂–Ω–æ—Å—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞ –∫–æ–¥–∞** - 18% –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –±—ã–ª–æ –º–µ—Ä—Ç–≤—ã–º –∫–æ–¥–æ–º
2. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–Ω–∞** - –¥–≤–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –≤—ã–∑—ã–≤–∞–ª–∏ confusion
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—Ö–æ–¥–µ** - INN –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–º API –≤—ã–∑–æ–≤–∞–º
4. **–ù–µ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ "TODO"** - MCP Server –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω, –Ω–æ –Ω–µ –¥–æ—Ä–∞–±–æ—Ç–∞–Ω –¥–æ –∫–æ–Ω—Ü–∞
5. **–£–¥–∞–ª–µ–Ω–∏–µ –ª—É—á—à–µ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** - –µ—Å–ª–∏ –∫–æ–¥ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —É–¥–∞–ª–∏—Ç–µ –µ–≥–æ (git history —Å–æ—Ö—Ä–∞–Ω–∏—Ç)

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ò –ü–û–î–î–ï–†–ñ–ö–ê

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` —Ñ–∞–π–ª - –≤—Å–µ –ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ endpoint `/utility/health` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ docker-compose logs –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤

---

## üèÜ –ò–¢–û–ì

**–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –æ—á–∏—â–µ–Ω, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É!**

- ‚úÖ **–ú–∏–Ω—É—Å 896 —Å—Ç—Ä–æ–∫ –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞**
- ‚úÖ **–ú–∏–Ω—É—Å 8 –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤**
- ‚úÖ **–ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
- ‚úÖ **–í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã**
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞**

**–ö–æ–¥–æ–≤–∞—è –±–∞–∑–∞ —Å—Ç–∞–ª–∞ –Ω–∞ 10.3% –º–µ–Ω—å—à–µ –∏ –Ω–∞ 100% —á–∏—â–µ! üéâ**

---

_–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω: 2025-12-18_  
_–í–µ—Ä—Å–∏—è: 1.0_
