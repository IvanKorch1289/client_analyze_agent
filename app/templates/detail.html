<!-- app/templates/detail.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–î–µ—Ç–∞–ª–∏ —Å–µ—Å—Å–∏–∏ {{ session.id }}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; background: #f5f5f5; }
        h2 { color: #2c3e50; }
        .section { background: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        pre { background: #f0f0f0; padding: 15px; border-radius: 5px; overflow-x: auto; }
        .label { font-weight: bold; color: #555; }
    </style>
</head>
<body>
    <h2>üîç –î–µ—Ç–∞–ª–∏ —Å–µ—Å—Å–∏–∏ ID: {{ session.id }}</h2>

    <div class="section">
        <div><span class="label">–ó–∞–ø—Ä–æ—Å:</span> {{ session.user_input }}</div>
        <div><span class="label">–ü–ª–∞–Ω:</span> {{ session.plan }}</div>
        <div><span class="label">–°—Ç–∞—Ç—É—Å:</span> {{ session.current_step }}</div>
    </div>

    <div class="section">
        <h3>üõ† –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:</h3>
        <pre>{{ session.tool_results | tojson(indent=2) }}</pre>
    </div>

    <div class="section">
        <h3>üìù –ê–Ω–∞–ª–∏–∑ –∞–≥–µ–Ω—Ç–∞:</h3>
        <div>{{ session.analysis_result | safe }}</div>
    </div>

    {% if session.saved_file_path %}
    <div class="section">
        <div><span class="label">üíæ –°–æ—Ö—Ä–∞–Ω—ë–Ω –≤ —Ñ–∞–π–ª:</span> {{ session.saved_file_path }}</div>
    </div>
    {% endif %}

    <div class="section">
        <div><span class="label">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:</span> {{ "–î–∞" if session.is_confirmed else "–ù–µ—Ç" }}</div>
        {% if session.feedback %}
        <div><span class="label">üí¨ –§–∏–¥–±–µ–∫:</span> {{ session.feedback }}</div>
        {% endif %}
    </div>

    <br>
    <a href="/history">‚Üê –ù–∞–∑–∞–¥ –∫ –∏—Å—Ç–æ—Ä–∏–∏</a>
</body>
</html>